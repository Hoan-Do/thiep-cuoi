<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Hoàn & Huyền — Thiệp Cưới</title>

  <!-- Fonts & Tailwind -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700;800&family=Italiana&family=Quicksand:wght@400;600;700&family=Great+Vibes&family=Noto+Serif+SC:wght@900&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: {
            serif: ['Playfair Display','serif'],
            display: ['Italiana','serif'],
            sans: ['Quicksand','system-ui','sans-serif'],
            script: ['Great Vibes','cursive']
          },
          colors: {
            coffee:{50:'#f7f1ea',100:'#efe3d5',200:'#e6d5c3',300:'#dcc3a9',400:'#cfae90',500:'#b89473',600:'#8b5e3c',700:'#734a2b',800:'#5b3b22',900:'#45301d'},
            burg:'#7e1f24', rosey:'#d4a373'
          },
          backgroundImage:{ hero:"url('image/hero_cover.png')" },
          boxShadow:{frame:'0 10px 30px rgba(0,0,0,.08)', gentle:'0 8px 24px rgba(0,0,0,.06)'}
        }
      }
    }
  </script>

  <style>
    html,body{scroll-behavior:smooth}
    :root{
      --sat: env(safe-area-inset-top, 0px);
      --sab: env(safe-area-inset-bottom, 0px);
      --vh: 1vh;               /* sẽ được JS cập nhật = innerHeight/100 */
      --door-ms: 1.6s;         /* tốc độ mở 2 cánh */
    }

    /* ========= COVER ========= */
    #cover{
      position:fixed; inset:0; z-index:70; pointer-events:auto; background:transparent;
      height:calc(var(--vh) * 100);                /* fallback chắc chắn */
    }
    @supports (height: 100svh){ #cover{ height:100svh; } }  /* ưu tiên svh */
    @supports (height: 100dvh){ #cover{ height:100dvh; } }  /* rồi tới dvh */

    /* Hai cánh 50/50 bằng left/right (không dùng 50vw để tránh sai số trên 1 số thiết bị) */
    #cover .side{
      position:absolute; top:0; bottom:0; background:#7e1f24; box-sizing:border-box; will-change:transform;
    }
    #cover .left  { left:0;   right:50%; transform:translateX(0); transition:transform var(--door-ms) cubic-bezier(.19,1,.22,1); z-index:1; }
    #cover .right { left:50%; right:0;   transform:translateX(0); transition:transform var(--door-ms) cubic-bezier(.19,1,.22,1); z-index:2; position:relative; }

    /* bóng mép cánh */
    #cover .left::after, #cover .right::after{
      content:""; position:absolute; top:0; bottom:0; width:20px; pointer-events:none;
    }
    #cover .left::after  { right:-1px; background:linear-gradient(90deg, rgba(0,0,0,.18), transparent); }
    #cover .right::after { left:-1px;  background:linear-gradient(270deg, rgba(0,0,0,.18), transparent); }

    /* Seal 囍: là con của .right (đi theo cánh phải), nhưng căn đúng tâm màn theo viewport:
       - ngang: trục giữa trùng với mép trong cánh phải -> left:0; translateX(-50%)
       - dọc: ưu tiên 50svh/50dvh; fallback var(--vh)*50
       - có bù safe-area để chuẩn giữa */
    #cover .right .seal{
      position:absolute;
      left:0;
      top:calc((var(--vh) * 50) + (var(--sat) - var(--sab))/2);   /* fallback */
      transform:translate(-50%, -50%);
      width:128px; height:128px; border-radius:999px;
      background: radial-gradient(55% 55% at 30% 30%, #cc8b5a, #8a5630 70%);
      box-shadow: inset 0 8px 18px rgba(255,255,255,.24),
                  inset 0 -8px 18px rgba(0,0,0,.28),
                  0 12px 26px rgba(0,0,0,.45);
      display:grid; place-items:center; z-index:3;
      /* không fade => seal đi hẳn cùng cánh */
    }
    @supports (height: 100svh){
      #cover .right .seal{ top: calc(50svh + (var(--sat) - var(--sab))/2); }
    }
    @supports (height: 100dvh){
      #cover .right .seal{ top: calc(50dvh + (var(--sat) - var(--sab))/2); }
    }
    #cover .right .seal .xi{
      font-family:'Noto Serif SC',serif; font-weight:900; font-size:84px;
      background:linear-gradient(#f6d9a5,#c99f5f); -webkit-background-clip:text; background-clip:text; color:transparent;
      filter:drop-shadow(0 1px 1px rgba(0,0,0,.35));
      user-select:none;
    }

    /* Mở màn: trái -100%, phải +100%; seal dính cánh phải */
    #cover.opened .left { transform:translateX(-100%); }
    #cover.opened .right{ transform:translateX(100%);  }

    /* Gợi ý chạm */
    #cover .hint{
      position:absolute; left:50%; bottom:calc(18px + var(--sab)); transform:translateX(-50%);
      color:#fff; background:rgba(0,0,0,.24); padding:.5rem .85rem; border-radius:12px; font-size:.9rem; letter-spacing:.06em; opacity:.95;
      transition:opacity .3s ease;
    }
    #cover.opened .hint{opacity:0}

    /* ===== Một số style tiện ích cho nội dung ===== */
    .section-card{background:#fff;border:1px solid #e6d5c3;border-radius:20px;box-shadow:0 12px 30px rgba(0,0,0,.06)}
    .reveal{opacity:0;transform:translateY(14px);transition:opacity .6s ease,transform .6s ease}
    .reveal.show{opacity:1;transform:none}
    #app{position:relative;z-index:1}
    #actionbar{position:fixed;left:0;right:0;bottom:0;z-index:50;background:rgba(255,255,255,.92);-webkit-backdrop-filter:saturate(140%) blur(8px);backdrop-filter:saturate(140%) blur(8px);border-top:1px solid #e6d5c3;padding-bottom:calc(8px + var(--sab))}
    #actionbar a{flex:1 1 0;display:flex;flex-direction:column;align-items:center;gap:4px;padding:10px 6px 8px;color:#5b3b22}
    #actionbar a.active{color:#8b5e3c;font-weight:700}
    #actionbar svg{width:22px;height:22px}
    body{padding-bottom:calc(64px + var(--sab))}
  </style>
</head>
<body class="bg-coffee-50 text-coffee-900 font-sans antialiased">

  <!-- ========= COVER ========= -->
  <div id="cover" class="select-none">
    <div class="side left"></div>
    <div class="side right">
      <div class="seal" aria-label="Niêm phong"><span class="xi" aria-hidden="true">囍</span></div>
    </div>
    <div class="hint">Chạm để mở thiệp</div>
  </div>

  <!-- (tuỳ chọn) Nút nhạc -->
  <button id="music-btn" class="fixed z-40 rounded-full bg-coffee-900 text-white w-12 h-12 grid place-items-center shadow-lg opacity-90 hover:opacity-100" style="right:1rem; bottom: calc(80px + var(--sab));" aria-label="Tắt/Bật tiếng">
    <svg id="icon-sound-on"  xmlns="http://www.w3.org/2000/svg" class="w-6 h-6" viewBox="0 0 24 24" fill="currentColor"><path d="M3 10v4h4l5 5V5L7 10H3zM16.5 12a4.5 4.5 0 01-2.12 3.84l1.06 1.82A6.5 6.5 0 0018.5 12a6.5 6.5 0 00-3.06-5.66l-1.06 1.82A4.5 4.5 0 0116.5 12z"/></svg>
    <svg id="icon-sound-off" xmlns="http://www.w3.org/2000/svg" class="w-6 h-6 hidden" viewBox="0 0 24 24" fill="currentColor"><path d="M16.5 12a4.5 4.5 0 01-2.12 3.84l1.06 1.82A6.5 6.5 0 0018.5 12a6.5 6.5 0 00-3.06-5.66l-1.06 1.82A4.5 4.5 0 0116.5 12z"/><path d="M3 10v4h4l5 5V5L7 10H3zM19 8l-2 2m0 4l2 2"/></svg>
  </button>
  <audio id="bgm" preload="auto" playsinline></audio>

  <!-- ========= BOTTOM ACTION BAR (mobile) ========= -->
  <nav id="actionbar" class="sm:hidden">
    <div class="max-w-6xl mx-auto flex">
      <a href="#home" class="ab-item" data-target="home" aria-label="Trang chủ"><svg viewBox="0 0 24 24" fill="currentColor"><path d="m12 3 9 7v11h-6v-6H9v6H3V10l9-7z"/></svg><span class="text-[11px]">Trang chủ</span></a>
      <a href="#timeline" class="ab-item" data-target="timeline" aria-label="Lịch trình"><svg viewBox="0 0 24 24" fill="currentColor"><path d="M7 2h2v2h6V2h2v2h3a2 2 0 0 1 2 2v3H2V6a2 2 0 0 1 2-2h3V2zm15 8H2v10a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V10zM6 14h5v5H6v-5z"/></svg><span class="text-[11px]">Lịch</span></a>
      <a href="#gallery" class="ab-item" data-target="gallery" aria-label="Album"><svg viewBox="0 0 24 24" fill="currentColor"><path d="M21 19V7a2 2 0 0 0-2-2H5C3.9 5 3 5.9 3 7v12a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z"/></svg><span class="text-[11px]">Album</span></a>
      <a href="#guestbook" class="ab-item" data-target="guestbook" aria-label="Lưu bút"><svg viewBox="0 0 24 24" fill="currentColor"><path d="M3 5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5zm13 0v4h4"/></svg><span class="text-[11px]">Lưu bút</span></a>
      <a href="#qr" class="ab-item" data-target="qr" aria-label="QR"><svg viewBox="0 0 24 24" fill="currentColor"><path d="M3 3h8v8H3V3zm2 2v4h4V5H5zm6 6h10v10H11V11zm2 2v6h6v-6h-6zM3 13h6v2H3v-2zm0 4h4v2H3v-2zm10-8h2v2h-2V9zm4 0h4v2h-4V9z"/></svg><span class="text-[11px]">QR</span></a>
    </div>
  </nav>

  <!-- ========= MAIN CONTENT (ví dụ rút gọn; bạn thay bằng nội dung hiện có) ========= -->
  <div id="app">
    <section id="home" class="px-3 pt-3">
      <div class="relative overflow-hidden section-card shadow-gentle">
        <div class="absolute inset-0 bg-hero bg-cover bg-center" id="hero-bg"></div>
        <div class="absolute inset-0 bg-coffee-900/60"></div>
        <div class="relative z-10 text-center px-5 py-20">
          <p class="font-script text-3xl text-white/95 reveal">Thiệp Mời</p>
          <h1 class="font-display tracking-widest text-white text-4xl sm:text-6xl mt-2 reveal">VĂN HOÀN</h1>
          <p class="text-4xl font-script text-rosey -mt-2 reveal">&</p>
          <h2 class="font-display tracking-widest text-white text-3xl sm:text-5xl reveal">NGỌC HUYỀN</h2>
          <div class="mt-6 inline-flex gap-2 reveal">
            <a href="#timeline" class="px-4 py-2 rounded-full bg-white/90 hover:bg-white text-coffee-900 font-semibold shadow-md">Xem lịch</a>
            <a href="#guestbook" class="px-4 py-2 rounded-full border border-white/70 text-white/95 hover:bg-white/10">Gửi lời chúc</a>
          </div>
        </div>
      </div>
    </section>

    <main class="max-w-6xl mx-auto px-3 pb-6 space-y-6 mt-4">
      <section id="timeline" class="scroll-mt-24">
        <div class="section-card p-5 sm:p-6 reveal">
          <h3 class="font-serif text-2xl font-bold text-coffee-700 text-center">Lịch trình ngày cưới</h3>
          <div class="mt-5 space-y-4">
            <article class="p-4 rounded-lg border border-coffee-200 bg-white/90">Nội dung lịch trình…</article>
            <article class="p-4 rounded-lg border border-coffee-200 bg-white/90">Nội dung lịch trình…</article>
          </div>
        </div>
      </section>
    </main>
  </div>

  <footer class="bg-coffee-900 text-white text-center py-8 mt-10">
    <p>&copy; <span id="current-year"></span> Văn Hoàn & Ngọc Huyền. All rights reserved.</p>
  </footer>

  <!-- ========= SCRIPT ========= -->
  <script type="module">
    /* Cập nhật --vh = innerHeight/100 để căn giữa tuyệt đối */
    function setVH(){
      const vh = window.innerHeight * 0.01;
      document.documentElement.style.setProperty('--vh', vh + 'px');
    }
    setVH();
    window.addEventListener('resize', setVH);
    window.addEventListener('orientationchange', setVH);

    /* Nhạc (tuỳ chọn) */
    const audio=document.getElementById('bgm');
    audio.src="music/Shane_Filan_of_Westlife_-_Beautiful_In_White_Svadebnaya_2010_(mp3.pm).mp3";
    const icoOn=document.getElementById('icon-sound-on'), icoOff=document.getElementById('icon-sound-off');
    function setMuted(m){ audio.muted=m; (m?icoOn?.classList.add('hidden'):icoOn?.classList.remove('hidden')); (m?icoOff?.classList.remove('hidden'):icoOff?.classList.add('hidden')); }
    setMuted(false);
    document.getElementById('music-btn')?.addEventListener('click',async()=>{ setMuted(!audio.muted); if(audio.paused){ try{ await audio.play(); }catch{} } });

    /* Mở màn khi chạm */
    const cover=document.getElementById('cover');
    const right=document.querySelector('#cover .right');
    const openCover=()=>{
      if(cover.classList.contains('opened')) return;
      cover.classList.add('opened');
      cover.style.pointerEvents='none';
      // Gỡ cover khi cánh phải mở xong
      right.addEventListener('transitionend',(e)=>{
        if(e.propertyName!=='transform') return;
        try{ cover.remove(); }catch{ cover.style.display='none'; }
      },{once:true});
      audio.play().catch(()=>{});
    };
    cover.addEventListener('click', openCover, { passive:true });

    // Hiệu ứng reveal & năm hiện tại
    const revObs=new IntersectionObserver(es=>{es.forEach(ent=>{if(ent.isIntersecting){ent.target.classList.add('show');revObs.unobserve(ent.target)}})},{threshold:.2,rootMargin:"0px 0px -10% 0px"});
    document.querySelectorAll('.reveal').forEach(el=>revObs.observe(el));
    if(!('IntersectionObserver'in window)){document.querySelectorAll('.reveal').forEach(el=>el.classList.add('show'))}
    document.getElementById('current-year').textContent=new Date().getFullYear();
  </script>
</body>
</html>
