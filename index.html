<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Thiệp Mộc Nâu • Hoàn & Huyền</title>
  <meta name="description" content="Thiệp cưới online phong cách mộc nâu của Văn Hoàn & Ngọc Huyền" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700;800&family=Italiana&family=Quicksand:wght@400;600;700&family=Great+Vibes&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: {
            serif: ['Playfair Display','serif'],
            display: ['Italiana','serif'],
            sans: ['Quicksand','system-ui','sans-serif'],
            script: ['Great Vibes','cursive']
          },
          colors: {
            coffee: {50:'#f7f1ea',100:'#efe3d5',200:'#e6d5c3',300:'#dcc3a9',400:'#cfae90',500:'#b89473',600:'#8b5e3c',700:'#734a2b',800:'#5b3b22',900:'#45301d'},
            burg: '#7e1f24', gold: '#e1c285', rosey: '#d4a373'
          },
          backgroundImage: {
            paperTex: "url('data:image/svg+xml;utf8,<svg xmlns=%22http://www.w3.org/2000/svg%22 width=%2248%22 height=%2248%22 viewBox=%220 0 48 48%22><filter id=%22n%22><feTurbulence type=%22fractalNoise%22 baseFrequency=%220.8%22 numOctaves=%222%22 stitchTiles=%22stitch%22/><feColorMatrix type=%22saturate%22 values=%220%22/><feComponentTransfer><feFuncA type=%22table%22 tableValues=%220 0 .04 .07%22/></feComponentTransfer></filter><rect width=%2248%22 height=%2248%22 filter=%22url(%23n)%22/></svg>')"
          }
        }
      }
    };
  </script>
  <style>
    html,body{scroll-behavior:smooth}
    .section-frame{
      background: linear-gradient(#fff, #fff) padding-box,
                  linear-gradient(135deg, rgba(139,94,60,.25), rgba(212,163,115,.25)) border-box;
      border: 1px solid transparent; border-radius: 22px; box-shadow: 0 12px 30px rgba(0,0,0,.06);
    }
    .reveal{opacity:0; transform:translateY(16px); transition:opacity .6s ease, transform .6s ease;}
    .reveal.show{opacity:1; transform:none;}
    /* ======= COVER (ENVELOPE) ======= */
    #cover{position:fixed; inset:0; z-index:70; pointer-events:auto; background:#7e1f24;}
    #cover .side{position:absolute; top:0; bottom:0; width:50%; background:#7e1f24; transition:transform 2.2s cubic-bezier(.17,.84,.26,1);}
    #cover .left{left:0; border-right:2px solid rgba(225,194,133,.8);}
    #cover .right{right:0; border-left:2px solid rgba(225,194,133,.8);}
    #cover.opened .left{transform:translateX(-100%);}
    #cover.opened .right{transform:translateX(100%);}
    /* Invitation card preview in the middle */
    #cover .card{
      position:absolute; left:50%; top:50%; transform:translate(-50%,-50%);
      width:min(88vw,420px); height:min(86vh,760px);
      border:3px solid #e1c285; border-radius:10px; overflow:hidden;
      box-shadow:0 30px 80px rgba(0,0,0,.35);
      transition:opacity .75s .8s, transform .8s .75s;
      background:#f8f4ef;
      display:grid; place-items:center;
    }
    #cover .card-inner{
      position:relative; width:100%; height:100%;
      background-image: var(--invite-image, url('https://images.unsplash.com/photo-1520614073990-dd602f64d05d?q=80&w=1260&auto=format&fit=crop'));
      background-size: cover; background-position:center;
      filter:contrast(.95) brightness(.95);
    }
    /* Wax seal image */
    #cover .seal{
      position:absolute; left:50%; bottom:28%;
      transform:translate(-50%,50%);
      width:120px; height:120px; border-radius:999px;
      background: radial-gradient(60% 60% at 30% 30%, #cc8b5a, #8a5630 70%);
      border:4px solid #caa36e;
      box-shadow: inset 0 8px 18px rgba(255,255,255,.25), inset 0 -8px 18px rgba(0,0,0,.28), 0 12px 26px rgba(0,0,0,.45);
    }
    #cover .seal-img{
      position:absolute; inset:0; width:100%; height:100%; object-fit:cover; border-radius:999px; opacity:.92;
      mix-blend-mode:multiply;
    }
    /* Disappear card when opened */
    #cover.opened .card{opacity:0; transform:translate(-50%,-52%) scale(.96);}
    /* Small helper text */
    #cover .hint{position:absolute; left:50%; bottom:20px; transform:translateX(-50%); color:#fff; background:rgba(0,0,0,.18); padding:.4rem .8rem; border-radius:12px; font-size:.9rem; letter-spacing:.06em;}
    /* Lightbox */
    .lb-backdrop{position:fixed; inset:0; background:rgba(0,0,0,.75); display:none; align-items:center; justify-content:center; z-index:60;}
    .lb-backdrop.active{display:flex;}
    .lb-img{max-width:92vw; max-height:82vh; border-radius:18px; box-shadow:0 20px 60px rgba(0,0,0,.35);}
    .lb-btn{position:absolute; top:50%; transform:translateY(-50%); background:rgba(255,255,255,.85); border-radius:999px; width:42px; height:42px; display:grid; place-items:center;}
    .lb-prev{left:18px;} .lb-next{right:18px;}
    .lb-close{position:absolute; top:14px; right:14px; background:rgba(255,255,255,.9); width:38px; height:38px; border-radius:999px; display:grid; place-items:center;}
  </style>
</head>
<body class="bg-coffee-50 bg-paperTex/30 text-coffee-900 font-sans antialiased">

  <!-- ===== COVER (auto open) ===== -->
  <div id="cover" class="select-none">
    <div class="side left"></div>
    <div class="side right"></div>
    <div class="card">
      <div class="card-inner"></div>
      <!-- Use a real wax seal image (transparent PNG) if you have one by changing SEAL_URL below -->
      <div class="seal">
        <img id="seal-img" class="seal-img" alt="wax seal" src="https://images.unsplash.com/photo-1591893502434-581c8e98f3a3?q=80&w=640&auto=format&fit=crop"/>
      </div>
    </div>
    <div class="hint">Thiệp sẽ mở tự động • chạm để mở ngay</div>
  </div>

  <!-- ===== MUSIC (autoplay attempt) ===== -->
  <button id="music-btn" class="fixed bottom-4 right-4 z-50 rounded-full bg-coffee-900 text-white w-12 h-12 grid place-items-center shadow-lg opacity-90 hover:opacity-100" aria-label="Tắt/Bật tiếng">
    <svg id="icon-sound-on" xmlns="http://www.w3.org/2000/svg" class="w-6 h-6" viewBox="0 0 24 24" fill="currentColor"><path d="M3 10v4h4l5 5V5L7 10H3zM16.5 12a4.5 4.5 0 01-2.12 3.84l1.06 1.82A6.5 6.5 0 0018.5 12a6.5 6.5 0 00-3.06-5.66l-1.06 1.82A4.5 4.5 0 0116.5 12z"/></svg>
    <svg id="icon-sound-off" xmlns="http://www.w3.org/2000/svg" class="w-6 h-6 hidden" viewBox="0 0 24 24" fill="currentColor"><path d="M16.5 12a4.5 4.5 0 01-2.12 3.84l1.06 1.82A6.5 6.5 0 0018.5 12a6.5 6.5 0 00-3.06-5.66l-1.06 1.82A4.5 4.5 0 0116.5 12z"/><path d="M3 10v4h4l5 5V5L7 10H3zM19 8l-2 2m0 4l2 2"/></svg>
  </button>
  <audio id="bgm" preload="auto" playsinline></audio>

  <!-- ===== MAIN HERO (kept simple demo) ===== -->
  <header id="home" class="relative min-h-[88svh] grid place-items-center overflow-hidden">
    <div class="absolute inset-0" style="background-image:url('https://images.unsplash.com/photo-1519741497674-611481863552?q=80&w=1470&auto=format&fit=crop'); background-size:cover; background-position:center;" id="hero-bg"></div>
    <div class="absolute inset-0 bg-coffee-900/55"></div>
    <div class="relative z-10 text-center px-6 py-24">
      <p class="font-script text-4xl sm:text-5xl text-white/90 reveal">Thiệp Mời</p>
      <h1 class="font-display tracking-widest text-white text-5xl sm:text-7xl md:text-8xl mt-2 reveal">VĂN HOÀN</h1>
      <p class="text-4xl md:text-5xl font-script text-rosey -mt-2 md:-mt-3 reveal">&</p>
      <h2 class="font-display tracking-widest text-white text-4xl sm:text-6xl md:text-7xl reveal">NGỌC HUYỀN</h2>
    </div>
  </header>

  <footer class="bg-coffee-900 text-white text-center py-8 mt-10">
    <p>&copy; <span id="current-year"></span> Văn Hoàn & Ngọc Huyền</p>
  </footer>

  <script type="module">
    // ===== Media URLs you can change quickly =====
    const INVITE_IMAGE_URL = "https://images.unsplash.com/photo-1520614073990-dd602f64d05d?q=80&w=1260&auto=format&fit=crop"; // invitation/paper style
    const SEAL_IMAGE_URL   = "https://images.unsplash.com/photo-1591893502434-581c8e98f3a3?q=80&w=640&auto=format&fit=crop";    // wax seal png/jpg
    const DEFAULT_MUSIC    = "https://cdn.pixabay.com/download/audio/2022/04/05/audio_987b1b0d2d.mp3?filename=romantic-ambient-112996.mp3";

    // Set images
    document.querySelector('#cover .card-inner').style.setProperty('--invite-image', `url('${INVITE_IMAGE_URL}')`);
    document.getElementById('seal-img').src = SEAL_IMAGE_URL;

    // ===== Autoplay music with graceful fallback =====
    const params = new URLSearchParams(location.search);
    const audio  = document.getElementById('bgm');
    const musicParam = params.get('music');
    audio.src = musicParam ? decodeURIComponent(musicParam) : DEFAULT_MUSIC;
    const btnOn  = document.getElementById('icon-sound-on');
    const btnOff = document.getElementById('icon-sound-off');
    function setMuted(m){
      audio.muted = m;
      if(m){ btnOn.classList.add('hidden'); btnOff.classList.remove('hidden'); }
      else { btnOff.classList.add('hidden'); btnOn.classList.remove('hidden'); }
      try{ localStorage.setItem('wedding-muted', m ? '1':'0'); }catch{}
    }
    // Try restore mute state
    try{ setMuted(localStorage.getItem('wedding-muted') === '1'); }catch{ setMuted(false); }

    // Attempt to autoplay on load (may be blocked on some browsers)
    async function tryPlay() {
      try { await audio.play(); }
      catch (e) {
        // If blocked, play muted first
        const wasMuted = audio.muted;
        audio.muted = true;
        try { await audio.play(); } catch {}
        // Unmute on first user gesture
        const unlock = () => { if(!wasMuted){ audio.muted = false; setMuted(false); } window.removeEventListener('click', unlock); window.removeEventListener('touchstart', unlock); };
        window.addEventListener('click', unlock, { once:true, passive:true });
        window.addEventListener('touchstart', unlock, { once:true, passive:true });
      }
    }
    // Start right away
    tryPlay();

    // Toggle mute
    document.getElementById('music-btn').addEventListener('click', () => {
      setMuted(!audio.muted);
    });

    // ===== Auto-open envelope after short delay; allow tap to open immediately =====
    const cover = document.getElementById('cover');
    const openCover = () => {
      if(cover.classList.contains('opened')) return;
      cover.classList.add('opened');
      setTimeout(()=>{ cover.style.display='none'; }, 2300);
    };
    // Auto open ~900ms after load for cinematic feeling
    setTimeout(openCover, 900);
    // Also open on tap/click
    cover.addEventListener('click', openCover, { passive:true });

    // Parallax for hero
    const hero = document.getElementById('hero-bg');
    window.addEventListener('scroll', () => {
      const y = window.scrollY * 0.25;
      hero.style.transform = `translate3d(0, ${y}px, 0)`;
    }, { passive: true });

    document.getElementById('current-year').textContent = new Date().getFullYear();
  </script>
</body>
</html>
